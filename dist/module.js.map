{"mappings":"ACsBA,IAAM,EAA6B,SAC7B,EAAwC,CAAC,EACzC,EAAsC,CAAC,KAAK,CAE3C,SAAS,IACd,IAAM,EAAgB,CAAyB,CAAC,EAAE,CAG9C,EAAS,AAFS,aAAa,OAAO,CAAC,IAEb,OAAO,SAAS,CAAC,QAAQ,EAAI,EAQ3D,MAPe,YAAX,GACF,CAAA,EAAS,OAAO,SAAS,CAAC,QAAQ,AAAR,EAExB,EAAO,MAAM,CAAG,GAClB,CAAA,EAAS,EAAO,SAAS,CAAC,EAAG,EAD/B,EAIO,EAA0B,OAAO,CAAC,GAAU,GAC/C,EACA,CACN,CAEO,SAAS,EAAU,CAAsB,EAC9C,aAAa,UAAU,CAAC,GACpB,AAAC,CAAA,GAAU,EAAA,EAAI,MAAM,CAAG,GAC1B,aAAa,OAAO,CAAC,EAAoB,GAAU,UAEvD,CAEO,SAAS,EAAe,CAAc,CAAE,CAAsB,EAC9D,AAAC,CAAA,GAAU,EAAA,EAAI,MAAM,GAGsB,EAA5C,EAA0B,OAAO,CAAC,IACpC,EAA0B,IAAI,CAAC,GAEjC,CAAoB,CAAC,EAAO,CAAG,EACjC,CAEO,SAAS,IACd,OAAO,CACT,CAEO,SAAS,EAAmB,CAAc,EACC,EAA5C,EAA0B,OAAO,CAAC,IACpC,EAA0B,IAAI,CAAC,EAEnC,CAEO,SAAS,EAAG,CAAe,CAAE,CAAuB,EAEzD,IAAM,EAAc,CAAoB,CADzB,GAAQ,QAAU,IACe,EAAI,KACpD,GAAI,CAAC,EACH,OAAO,EAGT,GAAI,GAAQ,WAAa,CAAA,EACvB,OACE,OAAO,IAAI,CAAC,GAAa,IAAI,CAAC,AAAC,GAAQ,CAAW,CAAC,EAAI,GAAK,IAC5D,EAIJ,IAAM,EAAS,GAAQ,QAAU,EAAE,CAC/B,EAAoC,CAAW,CAAC,EAAQ,EAAI,GAAW,GAC3E,GAAI,GAAU,GAAQ,QAAQ,KAAO,GAAI,CACvC,IAAM,EAAQ,GAAQ,OAAS,EACzB,EAAQ,EAAO,KAAK,CAAC,IACvB,CAAA,EAAM,MAAM,EACd,CAAA,EACE,EAAQ,EAAM,MAAM,CAChB,CAAK,CAAC,EAAM,CAAC,IAAI,GACjB,CAAK,CAAC,EAAM,MAAM,CAAG,EAAE,CAAC,IAAI,EAJpC,CAMF,CACA,IAAK,IAAI,EAAI,EAAG,EAAI,EAAO,MAAM,CAAE,IACjC,EAAS,EAAO,OAAO,CAAC,MAAO,CAAM,CAAC,EAAE,EAE1C,OAAO,CACT,Q,K,S,C,K,S,C,K,c,C,K,mB,C,K,kB,C,K,E","sources":["<anon>","src/index.ts"],"sourcesContent":["/**\n * A lightweight internationalization plugin\n *\n * @version 1.0.0\n * @author Charlie LEDUC <contact@pixeliste.fr>\n */ const $23ccb22ac3ecb2a2$var$_I18NT_LOCALE_KEY_ = \"locale\";\nconst $23ccb22ac3ecb2a2$var$_I18NT_TRANSLATIONS_ = {};\nconst $23ccb22ac3ecb2a2$var$_I18NT_SUPPORTED_LOCALES_ = [\n    \"en\"\n];\nfunction $23ccb22ac3ecb2a2$export$180605366c04f0cd() {\n    const defaultLocale = $23ccb22ac3ecb2a2$var$_I18NT_SUPPORTED_LOCALES_[0];\n    const storageLocale = localStorage.getItem($23ccb22ac3ecb2a2$var$_I18NT_LOCALE_KEY_);\n    let locale = storageLocale ?? window.navigator.language ?? defaultLocale;\n    if (locale === \"default\") locale = window.navigator.language;\n    if (locale.length > 2) locale = locale.substring(0, 2);\n    return $23ccb22ac3ecb2a2$var$_I18NT_SUPPORTED_LOCALES_.indexOf(locale) > -1 ? locale : defaultLocale;\n}\nfunction $23ccb22ac3ecb2a2$export$c8aadf3621e41efb(locale) {\n    localStorage.removeItem($23ccb22ac3ecb2a2$var$_I18NT_LOCALE_KEY_);\n    if ((locale ?? \"\").length > 0) localStorage.setItem($23ccb22ac3ecb2a2$var$_I18NT_LOCALE_KEY_, locale ?? \"default\");\n}\nfunction $23ccb22ac3ecb2a2$export$624e8e335d77f023(locale, translation) {\n    if (!(locale ?? \"\").length) return;\n    if ($23ccb22ac3ecb2a2$var$_I18NT_SUPPORTED_LOCALES_.indexOf(locale) < 0) $23ccb22ac3ecb2a2$var$_I18NT_SUPPORTED_LOCALES_.push(locale);\n    $23ccb22ac3ecb2a2$var$_I18NT_TRANSLATIONS_[locale] = translation;\n}\nfunction $23ccb22ac3ecb2a2$export$e284fb89d3e95f50() {\n    return $23ccb22ac3ecb2a2$var$_I18NT_SUPPORTED_LOCALES_;\n}\nfunction $23ccb22ac3ecb2a2$export$bad45f70182389c6(locale) {\n    if ($23ccb22ac3ecb2a2$var$_I18NT_SUPPORTED_LOCALES_.indexOf(locale) < 0) $23ccb22ac3ecb2a2$var$_I18NT_SUPPORTED_LOCALES_.push(locale);\n}\nfunction $23ccb22ac3ecb2a2$export$e1a0bf30965c1cae(message, params) {\n    const locale = params?.locale ?? $23ccb22ac3ecb2a2$export$180605366c04f0cd();\n    const translation = $23ccb22ac3ecb2a2$var$_I18NT_TRANSLATIONS_[locale] ?? null;\n    if (!translation) return message;\n    if (params?.reversed === true) return Object.keys(translation).find((key)=>translation[key] === message) ?? message;\n    const tokens = params?.tokens ?? [];\n    let output = translation[message] ?? message ?? \"\";\n    if (output && output?.indexOf(\"|\") > -1) {\n        const count = params?.count ?? 0;\n        const parts = output.split(\"|\");\n        if (parts.length) output = count < parts.length ? parts[count].trim() : parts[parts.length - 1].trim();\n    }\n    for(let i = 0; i < tokens.length; i++)output = output.replace(/%s/u, tokens[i]);\n    return output;\n}\n\n\nexport {$23ccb22ac3ecb2a2$export$180605366c04f0cd as getLocale, $23ccb22ac3ecb2a2$export$c8aadf3621e41efb as setLocale, $23ccb22ac3ecb2a2$export$624e8e335d77f023 as addTranslation, $23ccb22ac3ecb2a2$export$e284fb89d3e95f50 as getSupportedLocales, $23ccb22ac3ecb2a2$export$bad45f70182389c6 as addSupportedLocale, $23ccb22ac3ecb2a2$export$e1a0bf30965c1cae as _t};\n//# sourceMappingURL=module.js.map\n","/**\n * A lightweight internationalization plugin\n *\n * @version 1.0.0\n * @author Charlie LEDUC <contact@pixeliste.fr>\n */\n\nexport interface i18nJSON {\n  [key: string]: string | undefined;\n}\n\nexport interface i18nTranslation {\n  [lang: string]: i18nJSON | undefined;\n}\n\nexport interface i18nParameters {\n  locale?: string;\n  tokens?: any[];\n  count?: number;\n  reversed?: boolean;\n}\n\nconst _I18NT_LOCALE_KEY_: string = \"locale\";\nconst _I18NT_TRANSLATIONS_: i18nTranslation = {};\nconst _I18NT_SUPPORTED_LOCALES_: string[] = [\"en\"];\n\nexport function getLocale(): string {\n  const defaultLocale = _I18NT_SUPPORTED_LOCALES_[0];\n  const storageLocale = localStorage.getItem(_I18NT_LOCALE_KEY_);\n\n  let locale = storageLocale ?? window.navigator.language ?? defaultLocale;\n  if (locale === \"default\") {\n    locale = window.navigator.language;\n  }\n  if (locale.length > 2) {\n    locale = locale.substring(0, 2);\n  }\n\n  return _I18NT_SUPPORTED_LOCALES_.indexOf(locale) > -1\n    ? locale\n    : defaultLocale;\n}\n\nexport function setLocale(locale?: string | null): void {\n  localStorage.removeItem(_I18NT_LOCALE_KEY_);\n  if ((locale ?? \"\").length > 0) {\n    localStorage.setItem(_I18NT_LOCALE_KEY_, locale ?? \"default\");\n  }\n}\n\nexport function addTranslation(locale: string, translation?: i18nJSON): void {\n  if (!(locale ?? \"\").length) {\n    return;\n  }\n  if (_I18NT_SUPPORTED_LOCALES_.indexOf(locale) < 0) {\n    _I18NT_SUPPORTED_LOCALES_.push(locale);\n  }\n  _I18NT_TRANSLATIONS_[locale] = translation;\n}\n\nexport function getSupportedLocales(): string[] {\n  return _I18NT_SUPPORTED_LOCALES_;\n}\n\nexport function addSupportedLocale(locale: string): void {\n  if (_I18NT_SUPPORTED_LOCALES_.indexOf(locale) < 0) {\n    _I18NT_SUPPORTED_LOCALES_.push(locale);\n  }\n}\n\nexport function _t(message: string, params?: i18nParameters): string {\n  const locale = params?.locale ?? getLocale();\n  const translation = _I18NT_TRANSLATIONS_[locale] ?? null;\n  if (!translation) {\n    return message;\n  }\n\n  if (params?.reversed === true) {\n    return (\n      Object.keys(translation).find((key) => translation[key] === message) ??\n      message\n    );\n  }\n\n  const tokens = params?.tokens ?? [];\n  let output: string | null | undefined = translation[message] ?? message ?? \"\";\n  if (output && output?.indexOf(\"|\") > -1) {\n    const count = params?.count ?? 0;\n    const parts = output.split(\"|\");\n    if (parts.length) {\n      output =\n        count < parts.length\n          ? parts[count].trim()\n          : parts[parts.length - 1].trim();\n    }\n  }\n  for (let i = 0; i < tokens.length; i++) {\n    output = output.replace(/%s/u, tokens[i]);\n  }\n  return output;\n}\n"],"names":["$23ccb22ac3ecb2a2$var$_I18NT_LOCALE_KEY_","$23ccb22ac3ecb2a2$var$_I18NT_TRANSLATIONS_","$23ccb22ac3ecb2a2$var$_I18NT_SUPPORTED_LOCALES_","$23ccb22ac3ecb2a2$export$180605366c04f0cd","defaultLocale","locale","storageLocale","localStorage","getItem","window","navigator","language","length","substring","indexOf","$23ccb22ac3ecb2a2$export$c8aadf3621e41efb","removeItem","setItem","$23ccb22ac3ecb2a2$export$624e8e335d77f023","translation","push","$23ccb22ac3ecb2a2$export$e284fb89d3e95f50","$23ccb22ac3ecb2a2$export$bad45f70182389c6","$23ccb22ac3ecb2a2$export$e1a0bf30965c1cae","message","params","reversed","Object","keys","find","key","tokens","output","count","parts","split","trim","i","replace","getLocale","setLocale","addTranslation","getSupportedLocales","addSupportedLocale","_t"],"version":3,"file":"module.js.map"}